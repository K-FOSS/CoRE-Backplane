apiVersion: resolvemy.host/v1alpha1
kind: Cluster
metadata:
  name: core-home1-talos

  namespace: core-prod

  labels:
    argocd.argoproj.io/instance: dc1-k3s-node1-ops-cluster

spec:
  name: core-home1-talos

  description: Main cluster

  metadata:
    datacenter: home1
    
    region: yvr

  nodes: 3

  tenantRef:
    group: mylogin.space
    kind: Tenant
    name: core.mylogin.space
    namespace: core-prod

  environment: prod

  versions:
    kubernetes: v1.34.3
    talos: v1.12.5

  clustertype: infra

  computetype: baremetal

  domain: k8s.home1.resolvemy.host

  routing:
    ospf:
      enabled: true

      redistribute:
        connected:
          enabled: true
        bgp:
          enabled: true

  type: talos

  networks:
    pod:
      ipv4:
        - 172.20.56.0/21
      ipv6:
        - 2604:3d08:d174:2000::1:0/112

    service:
      - 10.44.4.0/22
      - 2604:3d08:d174:2000::2:0/111

    loadbalancer:
      networks:
        - name: core-public
          pools:
            - subnet: 66.165.222.119/32
              pool: 66.165.222.119/32
              aggregation: default

            - subnet: 10.1.1.84/32
              pool: 10.1.1.84/32
              aggregation: default

            - subnet: 10.1.1.153/32
              pool: 10.1.1.153/32
              aggregation: default


        - name: core-anycast
          pools:
            - subnet: 10.1.1.181/32
              pool: 10.1.1.181/32
              aggregation: default

            - aggregation: default
              pool: 10.1.1.67/32
              subnet: 10.1.1.67/32

            - aggregation: default
              pool: 10.1.1.19/32
              subnet: 10.1.1.19/32

      anycast: 10.1.1.0/24

      public: 66.165.222.106/32

      pool: 172.27.0.0/24

  controlplane:
    ipAddress: kubernetes.default.svc.k8s.home1.resolvemy.host
